(()=>{var e={};e.id=665,e.ids=[665],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},8438:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>u}),s(3272),s(5795),s(3817),s(2523);var r=s(3191),a=s(8716),n=s(7922),o=s.n(n),i=s(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let u=["",{children:["(auth)",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3272)),"D:\\CN8-FPT\\EXE\\FE\\doca-system-fe\\src\\app\\(auth)\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5795)),"D:\\CN8-FPT\\EXE\\FE\\doca-system-fe\\src\\app\\(auth)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,3817)),"D:\\CN8-FPT\\EXE\\FE\\doca-system-fe\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,2523)),"D:\\CN8-FPT\\EXE\\FE\\doca-system-fe\\src\\app\\not-found.tsx"]}],c=["D:\\CN8-FPT\\EXE\\FE\\doca-system-fe\\src\\app\\(auth)\\login\\page.tsx"],p="/(auth)/login/page",d={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(auth)/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},5250:(e,t,s)=>{Promise.resolve().then(s.bind(s,7451))},5047:(e,t,s)=>{"use strict";var r=s(7389);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},7451:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(326),a=s(7577),n=s(4723),o=s(1774),i=s(2242),l=s(549),u=s(3529),c=s(6226),p=s(5298),d=s(5047),h=s(2642),m=s(381),x=s(4099),g=s(4903);let f=()=>!1,P=(e,t,s)=>{if(f()){let r=new Date(Date.now()+864e5*s).toUTCString();document.cookie=`${e}=${encodeURIComponent(t)}; expires=${r}; path=/`}};function y(){let[e,t]=(0,a.useState)(!1),[s,y]=(0,a.useState)(""),b=(0,d.useRouter)(),k=(0,n.cI)({resolver:(0,o.X)(i.dm),defaultValues:{email:"",password:""}}),v=k.handleSubmit(async e=>{console.log("Form submitted with data:",e);try{let s;t(!0);let r=(0,g.kG)(g.Pn.AUTH.LOGIN);console.log(`Đang gọi API login tại: ${r}`);try{s=await h.iJ.apiV1LoginPost({usernameOrPhoneNumber:e.email,password:e.password}),console.log("API response:",s)}catch(a){console.error("Error from Swagger client:",a),console.log("Trying direct API call with axios...");let t=await x.Z.post(r,{usernameOrPhoneNumber:e.email,password:e.password},{headers:{"Content-Type":"application/json"}});console.log("Direct API response:",t),s={data:t.data}}if(s.data.token&&f())localStorage.setItem("token",s.data.token),P("token",s.data.token,7);else if(!s.data.token)throw Error("Token kh\xf4ng được trả về từ server");let a={id:s.data.id,username:s.data.username,phoneNumber:s.data.phoneNumber,fullName:s.data.fullName};f()&&(localStorage.setItem("userData",JSON.stringify(a)),P("userData",JSON.stringify(a),7)),m.Am.success("Đăng nhập th\xe0nh c\xf4ng!"),"admin"===e.email||"admin"===a.username?(console.log("Đăng nhập với t\xe0i khoản admin, chuyển hướng đến trang admin"),b.push("/admin")):b.push("/")}catch(t){console.error("Lỗi đăng nhập:",t);let e="Đăng nhập thất bại. Vui l\xf2ng kiểm tra lại th\xf4ng tin.";x.Z.isAxiosError(t)?(console.error("Chi tiết lỗi Axios:",{status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,config:{url:t.config?.url,method:t.config?.method,baseURL:t.config?.baseURL}}),t.response?e=401===t.response.status?"T\xean đăng nhập hoặc mật khẩu kh\xf4ng đ\xfang":403===t.response.status?"T\xe0i khoản của bạn đ\xe3 bị kh\xf3a":404===t.response.status?"Kh\xf4ng t\xecm thấy t\xe0i khoản":t.response.data?.message?t.response.data.message:`Lỗi server: ${t.response.status} ${t.response.statusText}`:t.request&&(e=`Kh\xf4ng thể kết nối đến m\xe1y chủ. Vui l\xf2ng kiểm tra kết nối v\xe0 thử lại sau.`)):t instanceof Error&&(e=t.message),console.error("Error message:",e),m.Am.error(e)}finally{t(!1)}});return(0,r.jsxs)("div",{className:"flex flex-row",children:[r.jsx(n.RV,{...k,children:(0,r.jsxs)("form",{method:"POST",onSubmit:e=>{e.preventDefault(),console.log("Form submitted via native submit"),v(e)},className:"bg-gray-100 flex flex-col justify-center items-center max-w-[1536px] p-6 rounded-xl shadow-md min-w-[700px]",children:[r.jsx("input",{type:"hidden",name:"csrf_token",value:s}),r.jsx("h1",{className:"text-2xl font-semibold",children:"Đăng nhập"}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 mt-6",children:[r.jsx(l.Z,{name:"email",label:"Email hoặc số điện thoại",placeholder:"Nhập email hoặc số điện thoại",className:"w-[404px]",autoComplete:"username"}),r.jsx(l.Z,{name:"password",label:"Mật khẩu",placeholder:"Nhập mật khẩu",type:"password",className:"w-[404px]",autoComplete:"current-password"}),r.jsx(p.Z,{href:"/forgot-password",className:"text-pink-doca hover:underline left-0 ",children:"Qu\xean mật khẩu?"}),(0,r.jsxs)("div",{className:"mt-6 flex flex-col gap-4",children:[r.jsx(u.Z,{className:"h-12 w-[404px] bg-pink-doca text-white rounded-3xl text-[16px]",disabled:e,type:"submit",children:e?"Đang xử l\xfd...":"Đăng Nhập"}),(0,r.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[r.jsx("p",{children:"Bạn chưa c\xf3 t\xe0i khoản? "}),r.jsx(p.Z,{href:"/signup",className:"text-pink-doca left-0 text-right hover:underline",children:"Tạo t\xe0i khoản"})]})]})]})]})}),r.jsx(p.Z,{href:"/",children:r.jsx(c.default,{src:"/images/bg-login.png",alt:"bg-login",width:600,height:900,className:"w-[700px] h-[700px] rounded-l-2xl"})})]})}function b(){return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col justify-center items-center",children:[r.jsx(m.x7,{position:"top-right"}),r.jsx(y,{})]})}},3272:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`D:\CN8-FPT\EXE\FE\doca-system-fe\src\app\(auth)\login\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[95,772,899,821,874],()=>s(8438));module.exports=r})();