(()=>{var e={};e.id=436,e.ids=[436],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},2361:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(4813),s(9080),s(3817),s(2523);var n=s(3191),r=s(8716),i=s(7922),a=s.n(i),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["(admin)",{children:["blog-management",{children:["edit-blog",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4813)),"D:\\CN8-FPT\\EXE\\FE\\doca-system-fe\\src\\app\\(admin)\\blog-management\\edit-blog\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9080)),"D:\\CN8-FPT\\EXE\\FE\\doca-system-fe\\src\\app\\(admin)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,3817)),"D:\\CN8-FPT\\EXE\\FE\\doca-system-fe\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,2523)),"D:\\CN8-FPT\\EXE\\FE\\doca-system-fe\\src\\app\\not-found.tsx"]}],d=["D:\\CN8-FPT\\EXE\\FE\\doca-system-fe\\src\\app\\(admin)\\blog-management\\edit-blog\\page.tsx"],h="/(admin)/blog-management/edit-blog/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(admin)/blog-management/edit-blog/page",pathname:"/blog-management/edit-blog",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3546:(e,t,s)=>{Promise.resolve().then(s.bind(s,4551))},4551:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var n=s(326),r=s(7577),i=s(5047),a=s(3205),l=s(549),o=s(2242),c=s(2213),d=s(4568);let h=new c.Uc(d.Z),u={updateBlog:async(e,t)=>{try{let s={name:t.title,description:t.description,status:t.status,isHidden:t.isHidden};return await h.apiV1BlogsIdPatch(e,s)}catch(e){throw e}}};var m=s(6226),p=s(381),g=s(57);function x(){let e=(0,i.useRouter)(),{id:t}=(0,i.useParams)(),s=(0,r.useRef)(null),[c,d]=(0,r.useState)(!0),[h,x]=(0,r.useState)(!1),[b,f]=(0,r.useState)(null),[y,v]=(0,r.useState)(null),[k,j]=(0,r.useState)({title:"",categoryIds:[],status:"",description:"",mainImage:null}),[N,q]=(0,r.useState)(null),[w,_]=(0,r.useState)(!1),[P,Z]=(0,r.useState)(null),E=e=>{Z(e),_(!0)},T=async()=>{if(t&&P){x(!0);try{let s=P.status;await u.updateBlog(t,{title:P.title,description:P.description,status:s,isHidden:!1}),p.ZP.success("Cập nhật blog th\xe0nh c\xf4ng!"),_(!1),setTimeout(()=>{e.push("/blog-management")},1e3)}catch(e){console.error("Error updating blog:",e),p.ZP.error("Cập nhật blog thất bại. Vui l\xf2ng thử lại sau.")}finally{x(!1)}}};return(0,n.jsxs)("div",{children:[b?(0,n.jsxs)("div",{className:"text-center py-10 text-red-500",children:[b,n.jsx("div",{className:"mt-4",children:n.jsx("button",{onClick:()=>e.push("/blog-management"),className:"px-4 py-2 bg-pink-doca text-white rounded-md hover:bg-pink-500",children:"Quay lại danh s\xe1ch"})})]}):(0,n.jsxs)(a.Z,{title:"Chỉnh sửa b\xe0i blog",schema:o.gT,defaultValues:k,onSubmit:e=>{E(e)},backLink:"/blog-management",submitButtonText:h?"Đang lưu...":"Cập nhật b\xe0i blog",maxHeight:"max-h-[calc(100vh-200px)]",formClassName:"h-[calc(100vh-150px)]",contentClassName:"pb-4 custom-scrollbar",children:[c&&n.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-80 flex items-center justify-center z-10",children:n.jsx("div",{className:"text-lg font-medium text-pink-doca",children:"Đang tải dữ liệu blog..."})}),n.jsx("div",{className:"flex justify-end mb-4",children:n.jsx("button",{type:"button",onClick:()=>{e.push(`/blog-management/view?id=${t}`)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Xem b\xe0i viết"})}),n.jsx(l.Z,{name:"title",label:"Ti\xeau đề b\xe0i blog",placeholder:"Nhập ti\xeau đề b\xe0i blog"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[n.jsx("p",{className:"text-base font-semibold mb-2",children:"Ph\xe2n loại"}),(0,n.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md",name:"categoryIds",defaultValue:y?.categoryIds[0]||"",children:[n.jsx("option",{value:"",children:"Chọn ph\xe2n loại"}),n.jsx("option",{value:"news",children:"Tin tức"}),n.jsx("option",{value:"tips",children:"Mẹo chăm s\xf3c th\xfa cưng"}),n.jsx("option",{value:"stories",children:"C\xe2u chuyện th\xfa cưng"}),n.jsx("option",{value:"adoption",children:"Nhận nu\xf4i"})]})]}),(0,n.jsxs)("div",{className:"flex flex-col",children:[n.jsx("p",{className:"text-base font-semibold mb-2",children:"Trạng th\xe1i"}),(0,n.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md",name:"status",defaultValue:y?.status||"",children:[n.jsx("option",{value:"",children:"Chọn trạng th\xe1i"}),n.jsx("option",{value:"URGENT",children:"Khẩn cấp"}),n.jsx("option",{value:"NEED_PRODUCT",children:"Cần hỗ trợ"}),n.jsx("option",{value:"PUBLISHED",children:"Xuất bản"}),n.jsx("option",{value:"DRAFT",children:"Nh\xe1p"})]})]})]}),n.jsx(l.Z,{name:"description",label:"M\xf4 tả",placeholder:"Nhập m\xf4 tả b\xe0i blog",isTextArea:!0}),(0,n.jsxs)("div",{className:"mt-4",children:[n.jsx("p",{className:"text-base font-semibold mb-2",children:"H\xecnh ảnh"}),(0,n.jsxs)("div",{className:"border-2 border-dashed border-gray-300 p-6 rounded-lg text-center",children:[N?n.jsx("div",{className:"mb-4",children:n.jsx(m.default,{src:N,alt:"Preview",width:200,height:200,className:"mx-auto object-cover rounded"})}):n.jsx("p",{children:"K\xe9o v\xe0 thả ảnh hoặc nhấp để chọn ảnh"}),n.jsx("input",{type:"file",accept:"image/*",name:"mainImage",className:"hidden",id:"blog-image-edit",ref:s,onChange:e=>{let t=e.target.files?.[0];if(!t)return;j(e=>({...e,mainImage:t}));let s=new FileReader;s.onload=()=>{q(s.result)},s.readAsDataURL(t)}}),n.jsx("label",{htmlFor:"blog-image-edit",className:"mt-2 inline-block px-4 py-2 bg-pink-doca text-white rounded-md cursor-pointer",children:N?"Đổi ảnh kh\xe1c":"Chọn ảnh"})]})]})]}),n.jsx(g.Z,{isOpen:w,title:"X\xe1c nhận cập nhật b\xe0i viết",message:"Bạn c\xf3 chắc chắn muốn cập nhật b\xe0i viết n\xe0y với những thay đổi đ\xe3 nhập?",confirmButtonText:"Cập nhật",cancelButtonText:"Hủy",onConfirm:T,onCancel:()=>{_(!1),Z(null)},type:"info"})]})}},3529:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(326),r=s(7524);function i({className:e,children:t,onClick:s,disabled:i=!1,loading:a=!1,variant:l="primary",type:o="button"}){return n.jsx("button",{onClick:s,disabled:i||a,type:o,className:(0,r.cn)("w-[172px] h-[60px] text-[20px] text-center font-medium rounded-xl transition-all duration-200",{primary:"bg-pink-doca text-white hover:bg-pink-600",secondary:"bg-gray-500 text-white hover:bg-gray-600",outline:"border border-pink-doca text-pink-doca hover:bg-pink-doca hover:text-white"}[l],i&&"opacity-50 cursor-not-allowed",e),children:a?n.jsx("span",{className:"animate-spin",children:"⏳"}):t})}s(7577)},57:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n}),s(326),s(7577),s(962);let n=({isOpen:e,title:t,message:s,confirmButtonText:n,cancelButtonText:r,onConfirm:i,onCancel:a,confirmButtonClass:l,cancelButtonClass:o,type:c="info"})=>null},3205:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s(326),r=s(4723),i=s(1774),a=s(3529),l=s(5298),o=s(7524);function c({title:e,children:t,onSubmit:s,schema:c,defaultValues:d,backLink:h="",backButtonText:u="Quay lại",submitButtonText:m="Lưu",methods:p,className:g,formClassName:x,submitButtonClassName:b,contentClassName:f,maxHeight:y="max-h-[70vh]"}){let v=(0,r.cI)({resolver:(0,i.X)(c),defaultValues:d}),k=p||v,j=k.handleSubmit(s);return(0,n.jsxs)("div",{className:(0,o.cn)("w-full",g),children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[e&&n.jsx("h1",{className:"text-2xl font-semibold text-pink-doca",children:e}),h&&n.jsx(a.Z,{className:"w-32 h-11 text-lg",children:n.jsx(l.Z,{href:h,children:u})})]}),n.jsx(r.RV,{...k,children:(0,n.jsxs)("form",{onSubmit:j,className:(0,o.cn)("bg-white p-6 rounded-lg shadow-md flex flex-col h-full",x),children:[n.jsx("div",{className:(0,o.cn)("flex-1 flex flex-col gap-4 overflow-y-auto pr-2 custom-scrollbar",y,f),children:t}),n.jsx("div",{className:"mt-6 flex justify-end sticky bottom-0 pt-4 bg-white border-t border-gray-100",children:n.jsx(a.Z,{type:"submit",className:(0,o.cn)("h-12 bg-pink-doca text-white text-base rounded-md px-6",b),children:m})})]})})]})}},549:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(326),r=s(4723),i=s(7524);function a({name:e,label:t,type:s="text",placeholder:a,className:l,isTextArea:o=!1,autoComplete:c}){let{register:d,formState:{errors:h}}=(0,r.Gc)();return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:e,className:"text-base font-semibold",children:t}),o?n.jsx("textarea",{...d(e),id:e,placeholder:a,className:(0,i.cn)("px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500",l)}):n.jsx("input",{...d(e),id:e,type:s,placeholder:a,autoComplete:c,className:(0,i.cn)("px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500",l)}),h[e]&&n.jsx("p",{className:"text-red-500 text-sm",children:h[e]?.message?.toString()})]})}},2242:(e,t,s)=>{"use strict";s.d(t,{Iy:()=>d,Qx:()=>o,dm:()=>i,gM:()=>l,gT:()=>h,if:()=>a,kn:()=>r,ot:()=>c});var n=s(123);let r=n.Ry().shape({firstName:n.Z_().matches(/^[A-Za-zÀ-ỹ\s]+$/,"Họ chỉ được chứa chữ v\xe0 dấu").required("Họ kh\xf4ng được để trống"),lastName:n.Z_().matches(/^[A-Za-zÀ-ỹ\s]+$/,"T\xean chỉ được chứa chữ v\xe0 dấu").required("T\xean kh\xf4ng được để trống"),email:n.Z_().email("Invalid email").required("Email kh\xf4ng được để trống"),password:n.Z_().min(6,"Mật khẩu \xedt nhất 6 k\xfd tự").matches(/[!@#$%^&*(),.?":{}|<>]/,"Mật khẩu cần c\xf3 \xedt nhất 1 k\xfd tự đặc biệt").required("Mật khẩu kh\xf4ng được để trống"),confirmPassword:n.Z_().oneOf([n.iH("password")],"Mật khẩu x\xe1c nhận kh\xf4ng khớp").required("X\xe1c nhận mật khẩu kh\xf4ng được để trống"),phone:n.Z_().matches(/^[0-9]{10}$/,"Số điện thoại phải c\xf3 10 chữ số").required("Số điện thoại kh\xf4ng được để trống"),otp:n.Z_().required("OTP kh\xf4ng được để trống"),message:n.Z_().optional()}),i=n.Ry().shape({email:n.Z_().required("Email hoặc số điện thoại kh\xf4ng được để trống"),password:n.Z_().required("Mật khẩu kh\xf4ng được để trống")});r.pick(["firstName","lastName"]);let a=r.pick(["firstName","lastName","email","password","confirmPassword","phone","otp"]),l=n.Ry().shape({email:n.Z_().email("Email kh\xf4ng hợp lệ").required("Email kh\xf4ng được để trống")}),o=n.Ry().shape({otp:n.Z_().required("OTP kh\xf4ng được để trống")}),c=n.Ry().shape({password:n.Z_().min(6,"Mật khẩu \xedt nhất 6 k\xfd tự").matches(/[!@#$%^&*(),.?":{}|<>]/,"Mật khẩu cần c\xf3 \xedt nhất 1 k\xfd tự đặc biệt").required("Mật khẩu kh\xf4ng được để trống"),confirmPassword:n.Z_().oneOf([n.iH("password")],"Mật khẩu x\xe1c nhận kh\xf4ng khớp").required("X\xe1c nhận mật khẩu kh\xf4ng được để trống")}),d=n.Ry().shape({name:n.Z_().required("T\xean sản phẩm kh\xf4ng được để trống"),price:n.Rx().positive("Gi\xe1 phải l\xe0 số dương").required("Gi\xe1 kh\xf4ng được để trống"),description:n.Z_().required("M\xf4 tả kh\xf4ng được để trống"),categoryIds:n.IX().min(1,"Phải chọn \xedt nhất 1 danh mục"),mainImage:n.nK().test("fileSize","File qu\xe1 lớn",e=>!e||e.size<=5e6),quantity:n.Rx().required("Số lượng kh\xf4ng được để trống"),size:n.Z_().required("K\xedch thước kh\xf4ng được để trống")}),h=n.Ry().shape({title:n.Z_().required("Ti\xeau đề kh\xf4ng được để trống"),content:n.Z_().required("Nội dung kh\xf4ng được để trống"),status:n.Z_().oneOf(["DRAFT","PUBLISHED","URGENT","NEED_PRODUCT","NEED_DONATION"],"Trạng th\xe1i kh\xf4ng hợp lệ"),categoryIds:n.IX().min(1,"Phải chọn \xedt nhất 1 danh mục"),description:n.Z_().required("M\xf4 tả kh\xf4ng được để trống")});n.Ry().shape({productId:n.Z_().required(),quantity:n.Rx().min(1,"Số lượng tối thiểu l\xe0 1").required("Số lượng kh\xf4ng được để trống")})},4813:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(9510);let r=(0,s(8570).createProxy)(String.raw`D:\CN8-FPT\EXE\FE\doca-system-fe\src\app\(admin)\blog-management\edit-blog\edit-blog-form\edit-blog-form.tsx#default`);function i(){return n.jsx("div",{children:n.jsx(r,{})})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[95,772,899,821,917],()=>s(2361));module.exports=n})();