(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6683:function(t,e,n){Promise.resolve().then(n.t.bind(n,9421,23)),Promise.resolve().then(n.bind(n,2924)),Promise.resolve().then(n.t.bind(n,9268,23))},1364:function(t,e,n){"use strict";var o=n(8619),a=n(7693);let r=new o.VK({basePath:a.q7,baseOptions:{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"")}}});e.Z=r},8078:function(t,e,n){"use strict";n.d(e,{D:function(){return i}});var o=n(3464),a=n(7693);class r{async signup(t){try{return(await o.Z.post("".concat(this.baseUrl,"/api/v1/signup"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){throw console.error("Lỗi khi đăng k\xfd:",t),t}}async requestOtp(t){try{return(await o.Z.post("".concat(this.baseUrl,"/api/v1/otp"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){throw console.error("Lỗi khi gửi OTP:",t),t}}async forgotPassword(t){try{return(await o.Z.post("".concat(this.baseUrl,"/api/v1/forget-password"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){throw console.error("Lỗi khi đặt lại mật khẩu:",t),t}}constructor(){this.baseUrl=a.q7}}let i=new r},2144:function(t,e,n){"use strict";n.d(e,{iJ:function(){return r}});var o=n(8619),a=n(1364);n(8078),new o.nH(a.Z),new o.E6(a.Z),console.log("Creating AuthApi with config:",a.Z);let r=new o.z9(a.Z)},2924:function(t,e,n){"use strict";n.d(e,{H:function(){return f},default:function(){return g}});var o=n(7437),a=n(2265),r=n(2144);let i=()=>!0,s=t=>{i()&&localStorage.setItem("token",t)},l=t=>{i()&&localStorage.setItem("refreshToken",t)},c=t=>{i()&&localStorage.setItem("userData",JSON.stringify(t))},u=t=>{i()&&(document.cookie="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"))};var h={login:async(t,e)=>{try{let n=(await r.iJ.apiV1LoginPost({usernameOrPhoneNumber:t,password:e})).data;n.token&&s(n.token),n.refreshToken&&l(n.refreshToken);let o={id:n.id,username:n.username,phoneNumber:n.phoneNumber,fullName:n.fullName};return c(o),n}catch(t){throw t}},logout:()=>{i()&&(localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userData"),u("token"),u("userData"),window.location.href="/login")},isAuthenticated:()=>!!i()&&!!localStorage.getItem("token"),getUserData:()=>{if(!i())return null;let t=localStorage.getItem("userData");return t?JSON.parse(t):null}};let p=(0,a.createContext)(void 0),f=t=>{let{children:e}=t,n=function(){let[t,e]=(0,a.useState)(!1),[n,o]=(0,a.useState)(null),[r,i]=(0,a.useState)(h.isAuthenticated()),[s,l]=(0,a.useState)(h.getUserData());return{login:async(t,n)=>{e(!0),o(null);try{let e=await h.login(t,n);return i(!0),l(h.getUserData()),e}catch(t){var a,r;throw o((null===(r=t.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Đăng nhập thất bại"),t}finally{e(!1)}},logout:()=>{h.logout(),i(!1),l(null)},isAuthenticated:r,userData:s,loading:t,error:n}}();return(0,a.useEffect)(()=>{},[]),(0,o.jsx)(p.Provider,{value:n,children:e})};var g=f},7693:function(t,e,n){"use strict";n.d(e,{Pn:function(){return a},kG:function(){return r},q7:function(){return o}});let o="https://production.doca.love",a={AUTH:{LOGIN:"/api/v1/login",SIGNUP:"/api/v1/signup",FORGET_PASSWORD:"/api/v1/forget-password",OTP:"/api/v1/otp"}},r=t=>(a.AUTH.LOGIN,"".concat(o).concat(t))},9268:function(){},9421:function(t){t.exports={style:{fontFamily:"'__Poppins_559008', '__Poppins_Fallback_559008'",fontStyle:"normal"},className:"__className_559008"}}},function(t){t.O(0,[674,464,619,971,117,744],function(){return t(t.s=6683)}),_N_E=t.O()}]);