(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{1737:function(t,e,n){Promise.resolve().then(n.bind(n,3241))},9376:function(t,e,n){"use strict";var r=n(5475);n.o(r,"useParams")&&n.d(e,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(e,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(e,{useSearchParams:function(){return r.useSearchParams}})},1364:function(t,e,n){"use strict";var r=n(8619),a=n(7693);let o=new r.VK({basePath:a.q7,baseOptions:{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"")}}});e.Z=o},8078:function(t,e,n){"use strict";n.d(e,{D:function(){return u}});var r=n(3464),a=n(7693);class o{async signup(t){try{return(await r.Z.post("".concat(this.baseUrl,"/api/v1/signup"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){throw console.error("Lỗi khi đăng k\xfd:",t),t}}async requestOtp(t){try{return(await r.Z.post("".concat(this.baseUrl,"/api/v1/otp"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){throw console.error("Lỗi khi gửi OTP:",t),t}}async forgotPassword(t){try{return(await r.Z.post("".concat(this.baseUrl,"/api/v1/forget-password"),t,{headers:{"Content-Type":"application/json"}})).data}catch(t){throw console.error("Lỗi khi đặt lại mật khẩu:",t),t}}constructor(){this.baseUrl=a.q7}}let u=new o},2144:function(t,e,n){"use strict";n.d(e,{iJ:function(){return o}});var r=n(8619),a=n(1364);n(8078),new r.nH(a.Z),new r.E6(a.Z),console.log("Creating AuthApi with config:",a.Z);let o=new r.z9(a.Z)},3241:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return i}});var r,a,o,u,s=n(7437);function i(t){let{children:e}=t;return(0,s.jsx)("div",{children:"Admin pages are skipped during build"})}n(2265),n(2924),n(9064),n(3145),n(9680),n(9376),n(8619),(r=o||(o={})).ADMIN="ADMIN",r.USER="USER",r.GUEST="GUEST",(a=u||(u={})).VIEW_POSTS="VIEW_POSTS",a.CREATE_POST="CREATE_POST",a.EDIT_POST="EDIT_POST",a.DELETE_POST="DELETE_POST",a.VIEW_PRODUCTS="VIEW_PRODUCTS",a.CREATE_PRODUCT="CREATE_PRODUCT",a.EDIT_PRODUCT="EDIT_PRODUCT",a.DELETE_PRODUCT="DELETE_PRODUCT",a.PURCHASE_PRODUCTS="PURCHASE_PRODUCTS",a.MANAGE_USERS="MANAGE_USERS",a.MANAGE_SETTINGS="MANAGE_SETTINGS",o.ADMIN,o.USER},9680:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var r=n(7437),a=n(1201),o=n(7648);function u(t){let{href:e,className:n,children:u}=t;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.default,{href:e,className:(0,a.cn)("",n),children:u})})}},2924:function(t,e,n){"use strict";n.d(e,{H:function(){return d},default:function(){return S}});var r=n(7437),a=n(2265),o=n(2144);let u=()=>!0,s=t=>{u()&&localStorage.setItem("token",t)},i=t=>{u()&&localStorage.setItem("refreshToken",t)},c=t=>{u()&&localStorage.setItem("userData",JSON.stringify(t))},l=t=>{u()&&(document.cookie="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"))};var h={login:async(t,e)=>{try{let n=(await o.iJ.apiV1LoginPost({usernameOrPhoneNumber:t,password:e})).data;n.token&&s(n.token),n.refreshToken&&i(n.refreshToken);let r={id:n.id,username:n.username,phoneNumber:n.phoneNumber,fullName:n.fullName};return c(r),n}catch(t){throw t}},logout:()=>{u()&&(localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userData"),l("token"),l("userData"),window.location.href="/login")},isAuthenticated:()=>!!u()&&!!localStorage.getItem("token"),getUserData:()=>{if(!u())return null;let t=localStorage.getItem("userData");return t?JSON.parse(t):null}};let f=(0,a.createContext)(void 0),d=t=>{let{children:e}=t,n=function(){let[t,e]=(0,a.useState)(!1),[n,r]=(0,a.useState)(null),[o,u]=(0,a.useState)(h.isAuthenticated()),[s,i]=(0,a.useState)(h.getUserData());return{login:async(t,n)=>{e(!0),r(null);try{let e=await h.login(t,n);return u(!0),i(h.getUserData()),e}catch(t){var a,o;throw r((null===(o=t.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)||"Đăng nhập thất bại"),t}finally{e(!1)}},logout:()=>{h.logout(),u(!1),i(null)},isAuthenticated:o,userData:s,loading:t,error:n}}();return(0,a.useEffect)(()=>{},[]),(0,r.jsx)(f.Provider,{value:n,children:e})};var S=d},7693:function(t,e,n){"use strict";n.d(e,{Pn:function(){return a},kG:function(){return o},q7:function(){return r}});let r="https://production.doca.love",a={AUTH:{LOGIN:"/api/v1/login",SIGNUP:"/api/v1/signup",FORGET_PASSWORD:"/api/v1/forget-password",OTP:"/api/v1/otp"}},o=t=>(a.AUTH.LOGIN,"".concat(r).concat(t))},1201:function(t,e,n){"use strict";n.d(e,{cn:function(){return o}});var r=n(1994),a=n(3335);function o(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.m6)((0,r.Z)(e))}}},function(t){t.O(0,[648,878,137,464,99,619,971,117,744],function(){return t(t.s=1737)}),_N_E=t.O()}]);