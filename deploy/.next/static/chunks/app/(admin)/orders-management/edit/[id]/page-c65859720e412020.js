(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{2389:function(e,t,s){Promise.resolve().then(s.bind(s,8336))},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},8336:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var n=s(7437),r=s(2265),a=s(9376),l=s(3145),c=s(9701),i=s(3544),o=s(9884),d=s(9501),h=s(4422),m=s(3842),u=s(9064);let x=h.Ry().shape({customerName:h.Z_().required("T\xean kh\xe1ch h\xe0ng l\xe0 bắt buộc"),customerPhone:h.Z_().matches(/^[0-9]{10}$/,"Số điện thoại phải c\xf3 10 chữ số").required("Số điện thoại l\xe0 bắt buộc"),customerEmail:h.Z_().email("Email kh\xf4ng hợp lệ").required("Email l\xe0 bắt buộc"),customerAddress:h.Z_().required("Địa chỉ l\xe0 bắt buộc"),status:h.Z_().required("Trạng th\xe1i đơn h\xe0ng l\xe0 bắt buộc"),blogId:h.Z_().nullable()});function g(){let e=(0,a.useRouter)(),{id:t}=(0,a.useParams)(),[s,h]=(0,r.useState)(null),[g,p]=(0,r.useState)([]),[b,f]=(0,r.useState)(!0),[y,j]=(0,r.useState)(!1),[N,v]=(0,r.useState)(null),[w,k]=(0,r.useState)({customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",status:"",blogId:null}),[S,P]=(0,r.useState)(!1),[C,Z]=(0,r.useState)(null),T=(0,d.cI)({resolver:(0,m.X)(x),defaultValues:w});(0,r.useEffect)(()=>{let e=async()=>{f(!0);try{var e;await new Promise(e=>setTimeout(e,500));let s={id:t,customerName:"Nguyễn Văn A",customerPhone:"0901234567",customerEmail:"nguyenvana@example.com",customerAddress:"123 Đường L\xea Lợi, Q.1, TP.HCM",orderDate:"15/03/2024",total:45e4,status:"Chờ x\xe1c nhận",products:[{id:"1",name:"Thức ăn cho ch\xf3 Royal Canin",quantity:2,price:12e4,category:"Thức ăn",image:"/images/dog-food.png"},{id:"3",name:"V\xf2ng cổ ch\xf3 m\xe8o",quantity:1,price:85e3,category:"Phụ kiện",image:"/images/dog-collar.png"}],blog:{id:"2",title:"C\xe1ch chăm s\xf3c th\xfa cưng m\xf9a n\xf3ng"}};h(s),p([{id:"1",title:"Những loại thức ăn tốt cho ch\xf3"},{id:"2",title:"C\xe1ch chăm s\xf3c th\xfa cưng m\xf9a n\xf3ng"},{id:"3",title:"C\xe1ch huấn luyện chim cảnh"},{id:"4",title:"Bệnh thường gặp ở th\xfa cưng"},{id:"5",title:"Mẹo chăm s\xf3c l\xf4ng cho ch\xf3"}]);let n={customerName:s.customerName,customerPhone:s.customerPhone,customerEmail:s.customerEmail,customerAddress:s.customerAddress,status:s.status,blogId:(null===(e=s.blog)||void 0===e?void 0:e.id)||null};k(n),T.reset(n),v(null)}catch(e){v("Kh\xf4ng thể tải th\xf4ng tin đơn h\xe0ng. Vui l\xf2ng thử lại sau."),console.error("Error fetching order and blogs:",e)}finally{f(!1)}};t&&e()},[t,T]);let E=e=>{Z(e),P(!0)},_=async()=>{if(C){j(!0);try{await new Promise(e=>setTimeout(e,1e3)),u.ZP.success("Cập nhật đơn h\xe0ng th\xe0nh c\xf4ng!"),P(!1),setTimeout(()=>{e.push("/orders-management")},1e3)}catch(e){console.error("Error updating order:",e),u.ZP.error("Cập nhật đơn h\xe0ng thất bại. Vui l\xf2ng thử lại sau.")}finally{j(!1)}}};return b?(0,n.jsx)("div",{className:"flex justify-center items-center min-h-[60vh]",children:(0,n.jsx)("div",{className:"text-lg font-medium text-pink-doca",children:"Đang tải th\xf4ng tin đơn h\xe0ng..."})}):N||!s?(0,n.jsxs)("div",{className:"text-center py-10 text-red-500",children:[N||"Kh\xf4ng t\xecm thấy th\xf4ng tin đơn h\xe0ng",(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("button",{onClick:()=>e.push("/orders-management"),className:"px-4 py-2 bg-pink-doca text-white rounded-md hover:bg-pink-500",children:"Quay lại danh s\xe1ch"})})]}):(0,n.jsxs)("div",{className:"mx-auto",children:[(0,n.jsxs)(i.Z,{title:"Chỉnh sửa đơn h\xe0ng",schema:x,defaultValues:w,onSubmit:e=>{E(e)},backLink:"/orders-management",submitButtonText:y?"Đang lưu...":"Cập nhật đơn h\xe0ng",methods:T,maxHeight:"max-h-[calc(100vh-200px)]",formClassName:"h-[calc(100vh-150px)]",contentClassName:"pb-4 custom-scrollbar",children:[b&&(0,n.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-80 flex items-center justify-center z-10",children:(0,n.jsx)("div",{className:"text-lg font-medium text-pink-doca",children:"Đang tải dữ liệu đơn h\xe0ng..."})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Th\xf4ng tin kh\xe1ch h\xe0ng"}),(0,n.jsx)(c.Z,{name:"customerName",label:"T\xean kh\xe1ch h\xe0ng",placeholder:"Nhập t\xean kh\xe1ch h\xe0ng"}),(0,n.jsx)(c.Z,{name:"customerPhone",label:"Số điện thoại",placeholder:"Nhập số điện thoại"}),(0,n.jsx)(c.Z,{name:"customerEmail",label:"Email",placeholder:"Nhập email"}),(0,n.jsx)(c.Z,{name:"customerAddress",label:"Địa chỉ",placeholder:"Nhập địa chỉ",isTextArea:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Th\xf4ng tin đơn h\xe0ng"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe3 đơn h\xe0ng"}),(0,n.jsx)("input",{type:"text",value:s.id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ng\xe0y đặt"}),(0,n.jsx)("input",{type:"text",value:s.orderDate,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tổng tiền"}),(0,n.jsx)("input",{type:"text",value:"".concat(s.total.toLocaleString(),"đ"),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trạng th\xe1i đơn h\xe0ng"}),(0,n.jsxs)("select",{...T.register("status"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-doca focus:border-transparent",children:[(0,n.jsx)("option",{value:"Chờ x\xe1c nhận",children:"Chờ x\xe1c nhận"}),(0,n.jsx)("option",{value:"Đ\xe3 x\xe1c nhận",children:"Đ\xe3 x\xe1c nhận"}),(0,n.jsx)("option",{value:"Đang vận chuyển",children:"Đang vận chuyển"}),(0,n.jsx)("option",{value:"Đ\xe3 giao h\xe0ng",children:"Đ\xe3 giao h\xe0ng"}),(0,n.jsx)("option",{value:"Đ\xe3 hủy",children:"Đ\xe3 hủy"})]}),T.formState.errors.status&&(0,n.jsx)("p",{className:"mt-1 text-xs text-red-500",children:T.formState.errors.status.message})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blog li\xean quan"}),(0,n.jsxs)("select",{...T.register("blogId"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-doca focus:border-transparent",children:[(0,n.jsx)("option",{value:"",children:"Kh\xf4ng c\xf3"}),g.map(e=>(0,n.jsx)("option",{value:e.id,children:e.title},e.id))]}),T.formState.errors.blogId&&(0,n.jsx)("p",{className:"mt-1 text-xs text-red-500",children:T.formState.errors.blogId.message})]})]})]}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Danh s\xe1ch sản phẩm"}),(0,n.jsx)("div",{className:"overflow-x-auto bg-gray-50 rounded-lg p-4",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-100",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sản phẩm"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ph\xe2n loại"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Đơn gi\xe1"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Số lượng"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Th\xe0nh tiền"})]})}),(0,n.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.products.map(e=>(0,n.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"h-10 w-10 flex-shrink-0 overflow-hidden rounded-md",children:e.image?(0,n.jsx)(l.default,{src:e.image,alt:e.name,width:40,height:40,className:"h-full w-full object-cover"}):(0,n.jsx)("div",{className:"h-10 w-10 bg-gray-200 flex items-center justify-center text-gray-500 text-xs",children:"No image"})}),(0,n.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})]})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.price.toLocaleString(),"đ"]}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.quantity}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(e.price*e.quantity).toLocaleString(),"đ"]})]},e.id)),(0,n.jsxs)("tr",{className:"bg-gray-50",children:[(0,n.jsx)("td",{colSpan:4,className:"px-6 py-4 text-right font-semibold",children:"Tổng cộng:"}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:[s.total.toLocaleString(),"đ"]})]})]})]})}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"* Sản phẩm kh\xf4ng thể chỉnh sửa sau khi đơn h\xe0ng đ\xe3 được tạo."})]})]}),(0,n.jsx)(o.Z,{isOpen:S,title:"X\xe1c nhận cập nhật đơn h\xe0ng",message:"Bạn c\xf3 chắc chắn muốn cập nhật đơn h\xe0ng n\xe0y với những thay đổi đ\xe3 nhập?",confirmButtonText:"Cập nhật",cancelButtonText:"Hủy",onConfirm:_,onCancel:()=>{P(!1),Z(null)},type:"info"})]})}},9555:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(7437),r=s(1201);function a(e){let{className:t,children:s,onClick:a,disabled:l=!1,loading:c=!1,variant:i="primary",type:o="button"}=e;return(0,n.jsx)("button",{onClick:a,disabled:l||c,type:o,className:(0,r.cn)("w-[172px] h-[60px] text-[20px] text-center font-medium rounded-xl transition-all duration-200",{primary:"bg-pink-doca text-white hover:bg-pink-600",secondary:"bg-gray-500 text-white hover:bg-gray-600",outline:"border border-pink-doca text-pink-doca hover:bg-pink-doca hover:text-white"}[i],l&&"opacity-50 cursor-not-allowed",t),children:c?(0,n.jsx)("span",{className:"animate-spin",children:"⏳"}):s})}s(2265)},9884:function(e,t,s){"use strict";var n=s(7437);s(2265);var r=s(4887),a=s(1201);t.Z=e=>{let{isOpen:t,title:s,message:l,confirmButtonText:c,cancelButtonText:i,onConfirm:o,onCancel:d,confirmButtonClass:h,cancelButtonClass:m,type:u="info"}=e;if(!t)return null;let x={warning:{header:"bg-yellow-50 border-yellow-200",title:"text-yellow-700",confirmButton:"bg-yellow-500 hover:bg-yellow-600"},danger:{header:"bg-red-50 border-red-200",title:"text-red-700",confirmButton:"bg-red-500 hover:bg-red-600"},info:{header:"bg-blue-50 border-blue-200",title:"text-blue-700",confirmButton:"bg-blue-500 hover:bg-blue-600"}};return(0,r.createPortal)((0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md mx-4 overflow-hidden",children:[(0,n.jsx)("div",{className:(0,a.cn)("px-6 py-4 border-b",x[u].header),children:(0,n.jsx)("h3",{className:(0,a.cn)("text-lg font-medium",x[u].title),children:s})}),(0,n.jsx)("div",{className:"px-6 py-4",children:(0,n.jsx)("p",{className:"text-gray-700",children:l})}),(0,n.jsxs)("div",{className:"px-6 py-4 bg-gray-50 flex justify-end space-x-3",children:[(0,n.jsx)("button",{onClick:d,className:(0,a.cn)("px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",m),children:i}),(0,n.jsx)("button",{onClick:o,className:(0,a.cn)("px-4 py-2 text-white rounded-md transition-colors",x[u].confirmButton,h),children:c})]})]})}),document.body)}},3544:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var n=s(7437),r=s(9501),a=s(3842),l=s(9555),c=s(9680),i=s(1201);function o(e){let{title:t,children:s,onSubmit:o,schema:d,defaultValues:h,backLink:m="",backButtonText:u="Quay lại",submitButtonText:x="Lưu",methods:g,className:p,formClassName:b,submitButtonClassName:f,contentClassName:y,maxHeight:j="max-h-[70vh]"}=e,N=(0,r.cI)({resolver:(0,a.X)(d),defaultValues:h}),v=g||N,w=v.handleSubmit(o);return(0,n.jsxs)("div",{className:(0,i.cn)("w-full",p),children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[t&&(0,n.jsx)("h1",{className:"text-2xl font-semibold text-pink-doca",children:t}),m&&(0,n.jsx)(l.Z,{className:"w-32 h-11 text-lg",children:(0,n.jsx)(c.Z,{href:m,children:u})})]}),(0,n.jsx)(r.RV,{...v,children:(0,n.jsxs)("form",{onSubmit:w,className:(0,i.cn)("bg-white p-6 rounded-lg shadow-md flex flex-col h-full",b),children:[(0,n.jsx)("div",{className:(0,i.cn)("flex-1 flex flex-col gap-4 overflow-y-auto pr-2 custom-scrollbar",j,y),children:s}),(0,n.jsx)("div",{className:"mt-6 flex justify-end sticky bottom-0 pt-4 bg-white border-t border-gray-100",children:(0,n.jsx)(l.Z,{type:"submit",className:(0,i.cn)("h-12 bg-pink-doca text-white text-base rounded-md px-6",f),children:x})})]})})]})}},9701:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var n=s(7437),r=s(9501),a=s(1201);function l(e){var t,s;let{name:l,label:c,type:i="text",placeholder:o,className:d,isTextArea:h=!1,autoComplete:m}=e,{register:u,formState:{errors:x}}=(0,r.Gc)();return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{htmlFor:l,className:"text-base font-semibold",children:c}),h?(0,n.jsx)("textarea",{...u(l),id:l,placeholder:o,className:(0,a.cn)("px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500",d)}):(0,n.jsx)("input",{...u(l),id:l,type:i,placeholder:o,autoComplete:m,className:(0,a.cn)("px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500",d)}),x[l]&&(0,n.jsx)("p",{className:"text-red-500 text-sm",children:null===(s=x[l])||void 0===s?void 0:null===(t=s.message)||void 0===t?void 0:t.toString()})]})}},9680:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var n=s(7437),r=s(1201),a=s(7648);function l(e){let{href:t,className:s,children:l}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.default,{href:t,className:(0,r.cn)("",s),children:l})})}},1201:function(e,t,s){"use strict";s.d(t,{cn:function(){return a}});var n=s(1994),r=s(3335);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,n.Z)(t))}}},function(e){e.O(0,[648,878,137,915,99,971,117,744],function(){return e(e.s=2389)}),_N_E=e.O()}]);