(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[129],{8057:function(e,n,t){Promise.resolve().then(t.bind(t,7907))},8078:function(e,n,t){"use strict";t.d(n,{D:function(){return s}});var r=t(3464),i=t(7693);class a{async signup(e){try{return(await r.Z.post("".concat(this.baseUrl,"/api/v1/signup"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){throw console.error("Lỗi khi đăng k\xfd:",e),e}}async requestOtp(e){try{return(await r.Z.post("".concat(this.baseUrl,"/api/v1/otp"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){throw console.error("Lỗi khi gửi OTP:",e),e}}async forgotPassword(e){try{return(await r.Z.post("".concat(this.baseUrl,"/api/v1/forget-password"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){throw console.error("Lỗi khi đặt lại mật khẩu:",e),e}}constructor(){this.baseUrl=i.q7}}let s=new a},7907:function(e,n,t){"use strict";t.d(n,{default:function(){return m}});var r=t(7437),i=t(9501),a=t(3842),s=t(5665),c=t(9701),o=t(9555),l=t(3145),h=t(9680),u=t(8078),d=t(2265),p=t(9064);function m(){let[e,n]=(0,d.useState)(!1),[t,m]=(0,d.useState)(!1),[g,x]=(0,d.useState)(!1),f=(0,i.cI)({resolver:(0,a.X)(s.if),defaultValues:{email:"",password:"",firstName:"",lastName:"",phone:"",otp:""}}),k=f.handleSubmit(async e=>{try{if(!g){p.Am.error("Vui l\xf2ng gửi v\xe0 nhập m\xe3 OTP trước khi đăng k\xfd");return}if(!e.otp){p.Am.error("Vui l\xf2ng nhập m\xe3 OTP đ\xe3 được gửi đến email của bạn"),f.setError("otp",{type:"manual",message:"Vui l\xf2ng nhập m\xe3 OTP"});return}n(!0);let t={username:e.email,password:e.password,phoneNumber:e.phone,fullName:"".concat(e.firstName," ").concat(e.lastName),otp:e.otp},r=await u.D.signup(t);p.Am.success("Đăng k\xfd th\xe0nh c\xf4ng!"),console.log("Đăng k\xfd th\xe0nh c\xf4ng:",r),window.location.href="/login"}catch(n){var t,r;let e=(null===(r=n.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Đăng k\xfd thất bại. Vui l\xf2ng thử lại.";e.toLowerCase().includes("otp")||e.toLowerCase().includes("m\xe3 x\xe1c thực")?(p.Am.error("M\xe3 OTP kh\xf4ng hợp lệ hoặc đ\xe3 hết hạn. Vui l\xf2ng thử lại."),f.setError("otp",{type:"manual",message:"M\xe3 OTP kh\xf4ng hợp lệ hoặc đ\xe3 hết hạn"})):p.Am.error(e),console.error("Lỗi khi đăng k\xfd:",n)}finally{n(!1)}}),N=async()=>{let e=f.getValues("email");if(!e){f.setError("email",{type:"manual",message:"Vui l\xf2ng nhập email trước khi gửi OTP"}),p.Am.error("Vui l\xf2ng nhập email trước khi gửi OTP");return}try{m(!0),await u.D.requestOtp({email:e}),p.Am.success("Đ\xe3 gửi m\xe3 OTP đến email của bạn!"),x(!0)}catch(e){var n,t;p.Am.error((null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message)||"Kh\xf4ng thể gửi OTP. Vui l\xf2ng thử lại."),console.error("Lỗi khi gửi OTP:",e)}finally{m(!1)}};return(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(i.RV,{...f,children:(0,r.jsxs)("form",{onSubmit:k,className:"bg-gray-100 flex flex-col justify-center items-center max-w-[1536px] p-6 rounded-xl shadow-md min-w-[700px]",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:"Tạo t\xe0i khoản"}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 mt-6",children:[(0,r.jsx)(c.Z,{name:"firstName",label:"Họ",placeholder:"Nhập họ",className:"w-[404px]"}),(0,r.jsx)(c.Z,{name:"lastName",label:"T\xean",placeholder:"Nhập t\xean",className:"w-[404px]"}),(0,r.jsx)(c.Z,{name:"email",label:"Email",placeholder:"Nhập email",className:"w-[404px]"}),(0,r.jsx)(c.Z,{name:"phone",label:"Số điện thoại",placeholder:"Nhập số điện thoại",className:"w-[404px]"}),(0,r.jsx)(c.Z,{name:"password",label:"Mật khẩu",placeholder:"Nhập mật khẩu",type:"password",className:"w-[404px]"}),(0,r.jsx)(c.Z,{name:"confirmPassword",label:"X\xe1c nhận mật khẩu",placeholder:"Nhập lại mật khẩu",type:"password",className:"w-[404px]"}),(0,r.jsxs)("div",{className:"flex flex-row justify-between gap-4",children:[(0,r.jsx)(c.Z,{name:"otp",label:"OTP email",placeholder:"Nhập OTP",className:"w-[250px]"}),(0,r.jsx)("div",{className:"flex flex-row items-center justify-center mt-8",children:(0,r.jsx)(o.Z,{type:"button",onClick:N,disabled:t,className:"h-11 w-[100px] bg-pink-doca text-white rounded-md text-[16px]",children:t?"Đang gửi...":g?"Gửi lại":"Gửi OTP"})})]}),(0,r.jsxs)("div",{className:"mt-6 flex flex-col gap-4",children:[(0,r.jsx)(o.Z,{type:"submit",disabled:e,className:"h-12 w-[404px] bg-pink-doca text-white rounded-3xl text-[16px]",children:e?"Đang xử l\xfd...":"Đăng k\xfd"}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(h.Z,{href:"/login",className:"text-pink-doca hover:underline",children:"Quay lại đăng nhập"})})]})]})]})}),(0,r.jsx)(h.Z,{href:"/",className:"w-[700px] h-[700px] rounded-l-2xl",children:(0,r.jsx)(l.default,{src:"/images/bg-login.png",alt:"bg-login",width:600,height:900,className:"w-[700px] h-[700px] rounded-l-2xl"})})]})}},9555:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(7437),i=t(1201);function a(e){let{className:n,children:t,onClick:a,disabled:s=!1,loading:c=!1,variant:o="primary",type:l="button"}=e;return(0,r.jsx)("button",{onClick:a,disabled:s||c,type:l,className:(0,i.cn)("w-[172px] h-[60px] text-[20px] text-center font-medium rounded-xl transition-all duration-200",{primary:"bg-pink-doca text-white hover:bg-pink-600",secondary:"bg-gray-500 text-white hover:bg-gray-600",outline:"border border-pink-doca text-pink-doca hover:bg-pink-doca hover:text-white"}[o],s&&"opacity-50 cursor-not-allowed",n),children:c?(0,r.jsx)("span",{className:"animate-spin",children:"⏳"}):t})}t(2265)},9701:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(7437),i=t(9501),a=t(1201);function s(e){var n,t;let{name:s,label:c,type:o="text",placeholder:l,className:h,isTextArea:u=!1,autoComplete:d}=e,{register:p,formState:{errors:m}}=(0,i.Gc)();return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{htmlFor:s,className:"text-base font-semibold",children:c}),u?(0,r.jsx)("textarea",{...p(s),id:s,placeholder:l,className:(0,a.cn)("px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500",h)}):(0,r.jsx)("input",{...p(s),id:s,type:o,placeholder:l,autoComplete:d,className:(0,a.cn)("px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500",h)}),m[s]&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:null===(t=m[s])||void 0===t?void 0:null===(n=t.message)||void 0===n?void 0:n.toString()})]})}},9680:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(7437),i=t(1201),a=t(7648);function s(e){let{href:n,className:t,children:s}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.default,{href:n,className:(0,i.cn)("",t),children:s})})}},7693:function(e,n,t){"use strict";t.d(n,{Pn:function(){return i},kG:function(){return a},q7:function(){return r}});let r="https://production.doca.love",i={AUTH:{LOGIN:"/api/v1/login",SIGNUP:"/api/v1/signup",FORGET_PASSWORD:"/api/v1/forget-password",OTP:"/api/v1/otp"}},a=e=>(i.AUTH.LOGIN,"".concat(r).concat(e))},1201:function(e,n,t){"use strict";t.d(n,{cn:function(){return a}});var r=t(1994),i=t(3335);function a(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,i.m6)((0,r.Z)(n))}},5665:function(e,n,t){"use strict";t.d(n,{Iy:function(){return h},Qx:function(){return o},dm:function(){return a},gM:function(){return c},gT:function(){return u},if:function(){return s},kn:function(){return i},ot:function(){return l}});var r=t(4422);let i=r.Ry().shape({firstName:r.Z_().matches(/^[A-Za-zÀ-ỹ\s]+$/,"Họ chỉ được chứa chữ v\xe0 dấu").required("Họ kh\xf4ng được để trống"),lastName:r.Z_().matches(/^[A-Za-zÀ-ỹ\s]+$/,"T\xean chỉ được chứa chữ v\xe0 dấu").required("T\xean kh\xf4ng được để trống"),email:r.Z_().email("Invalid email").required("Email kh\xf4ng được để trống"),password:r.Z_().min(6,"Mật khẩu \xedt nhất 6 k\xfd tự").matches(/[!@#$%^&*(),.?":{}|<>]/,"Mật khẩu cần c\xf3 \xedt nhất 1 k\xfd tự đặc biệt").required("Mật khẩu kh\xf4ng được để trống"),confirmPassword:r.Z_().oneOf([r.iH("password")],"Mật khẩu x\xe1c nhận kh\xf4ng khớp").required("X\xe1c nhận mật khẩu kh\xf4ng được để trống"),phone:r.Z_().matches(/^[0-9]{10}$/,"Số điện thoại phải c\xf3 10 chữ số").required("Số điện thoại kh\xf4ng được để trống"),otp:r.Z_().required("OTP kh\xf4ng được để trống"),message:r.Z_().optional()}),a=r.Ry().shape({email:r.Z_().required("Email hoặc số điện thoại kh\xf4ng được để trống"),password:r.Z_().required("Mật khẩu kh\xf4ng được để trống")});i.pick(["firstName","lastName"]);let s=i.pick(["firstName","lastName","email","password","confirmPassword","phone","otp"]),c=r.Ry().shape({email:r.Z_().email("Email kh\xf4ng hợp lệ").required("Email kh\xf4ng được để trống")}),o=r.Ry().shape({otp:r.Z_().required("OTP kh\xf4ng được để trống")}),l=r.Ry().shape({password:r.Z_().min(6,"Mật khẩu \xedt nhất 6 k\xfd tự").matches(/[!@#$%^&*(),.?":{}|<>]/,"Mật khẩu cần c\xf3 \xedt nhất 1 k\xfd tự đặc biệt").required("Mật khẩu kh\xf4ng được để trống"),confirmPassword:r.Z_().oneOf([r.iH("password")],"Mật khẩu x\xe1c nhận kh\xf4ng khớp").required("X\xe1c nhận mật khẩu kh\xf4ng được để trống")}),h=r.Ry().shape({name:r.Z_().required("T\xean sản phẩm kh\xf4ng được để trống"),price:r.Rx().positive("Gi\xe1 phải l\xe0 số dương").required("Gi\xe1 kh\xf4ng được để trống"),description:r.Z_().required("M\xf4 tả kh\xf4ng được để trống"),categoryIds:r.IX().min(1,"Phải chọn \xedt nhất 1 danh mục"),mainImage:r.nK().test("fileSize","File qu\xe1 lớn",e=>!e||e.size<=5e6),quantity:r.Rx().required("Số lượng kh\xf4ng được để trống"),size:r.Z_().required("K\xedch thước kh\xf4ng được để trống")}),u=r.Ry().shape({title:r.Z_().required("Ti\xeau đề kh\xf4ng được để trống"),content:r.Z_().required("Nội dung kh\xf4ng được để trống"),status:r.Z_().oneOf(["DRAFT","PUBLISHED","URGENT","NEED_PRODUCT","NEED_DONATION"],"Trạng th\xe1i kh\xf4ng hợp lệ"),categoryIds:r.IX().min(1,"Phải chọn \xedt nhất 1 danh mục"),description:r.Z_().required("M\xf4 tả kh\xf4ng được để trống")});r.Ry().shape({productId:r.Z_().required(),quantity:r.Rx().min(1,"Số lượng tối thiểu l\xe0 1").required("Số lượng kh\xf4ng được để trống")})}},function(e){e.O(0,[648,878,137,915,464,99,971,117,744],function(){return e(e.s=8057)}),_N_E=e.O()}]);