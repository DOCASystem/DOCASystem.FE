(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[985],{5754:function(e,t,n){Promise.resolve().then(n.bind(n,8224))},8078:function(e,t,n){"use strict";n.d(t,{D:function(){return a}});var i=n(3464),r=n(7693);class s{async signup(e){try{return(await i.Z.post("".concat(this.baseUrl,"/api/v1/signup"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){throw console.error("Lỗi khi đăng k\xfd:",e),e}}async requestOtp(e){try{return(await i.Z.post("".concat(this.baseUrl,"/api/v1/otp"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){throw console.error("Lỗi khi gửi OTP:",e),e}}async forgotPassword(e){try{return(await i.Z.post("".concat(this.baseUrl,"/api/v1/forget-password"),e,{headers:{"Content-Type":"application/json"}})).data}catch(e){throw console.error("Lỗi khi đặt lại mật khẩu:",e),e}}constructor(){this.baseUrl=r.q7}}let a=new s},8224:function(e,t,n){"use strict";n.d(t,{default:function(){return p}});var i=n(7437),r=n(2265),s=n(9501),a=n(3842),c=n(5665),l=n(9701),o=n(9555),h=n(9680),d=n(3145),u=n(8078),m=n(9064);function p(){let[e,t]=(0,r.useState)(1),[n,p]=(0,r.useState)(""),[x,g]=(0,r.useState)(""),[f,k]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[w,y]=(0,r.useState)(""),N=(0,s.cI)({resolver:(0,a.X)(c.gM),defaultValues:{email:""}}),j=(0,s.cI)({resolver:(0,a.X)(c.Qx),defaultValues:{otp:""}}),Z=(0,s.cI)({resolver:(0,a.X)(c.ot),defaultValues:{password:"",confirmPassword:""}}),T=N.handleSubmit(async e=>{try{k(!0),p(e.email),await u.D.requestOtp({email:e.email});let n=prompt("Vui l\xf2ng nhập số điện thoại của bạn để x\xe1c thực:");n?(g(n),t(2),m.Am.success("Đ\xe3 gửi m\xe3 OTP đến email của bạn!")):m.Am.error("Vui l\xf2ng nhập số điện thoại để tiếp tục.")}catch(t){var n,i;let e=(null===(i=t.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.message)||"Kh\xf4ng thể gửi OTP. Vui l\xf2ng thử lại.";m.Am.error(e),console.error("Lỗi khi gửi OTP:",t)}finally{k(!1)}}),O=async()=>{try{v(!0),await u.D.requestOtp({email:n}),m.Am.success("Đ\xe3 gửi lại m\xe3 OTP đến email của bạn!")}catch(i){var e,t;let n=(null===(t=i.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Kh\xf4ng thể gửi lại OTP. Vui l\xf2ng thử lại.";m.Am.error(n),console.error("Lỗi khi gửi lại OTP:",i)}finally{v(!1)}},P=j.handleSubmit(async e=>{try{k(!0),y(e.otp),t(3)}catch(t){var n,i;let e=(null===(i=t.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.message)||"X\xe1c thực OTP thất bại. Vui l\xf2ng thử lại.";m.Am.error(e),console.error("Lỗi khi x\xe1c thực OTP:",t)}finally{k(!1)}}),q=Z.handleSubmit(async e=>{try{k(!0),await u.D.forgotPassword({otp:w,phoneNumber:x,password:e.password}),m.Am.success("Đặt lại mật khẩu th\xe0nh c\xf4ng! Vui l\xf2ng đăng nhập với mật khẩu mới."),window.location.href="/login"}catch(r){var n,i;let e=(null===(i=r.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.message)||"Đặt lại mật khẩu thất bại. Vui l\xf2ng thử lại.";e.toLowerCase().includes("otp")||e.toLowerCase().includes("m\xe3 x\xe1c thực")?(m.Am.error("M\xe3 OTP kh\xf4ng hợp lệ hoặc đ\xe3 hết hạn. Vui l\xf2ng quay lại bước x\xe1c nhận OTP."),t(2)):m.Am.error(e),console.error("Lỗi khi đặt lại mật khẩu:",r)}finally{k(!1)}});return(0,i.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,i.jsxs)("div",{className:"min-w-[700px]",children:[1===e&&(0,i.jsx)(s.RV,{...N,children:(0,i.jsxs)("form",{onSubmit:T,className:"bg-gray-100 flex flex-col justify-center items-center max-w-[1536px] p-6 rounded-xl shadow-md min-w-[700px]",children:[(0,i.jsx)("h1",{className:"text-2xl font-semibold",children:"Qu\xean mật khẩu"}),(0,i.jsx)("p",{className:"text-gray-600 mt-2 mb-6 text-center",children:"Nhập email của bạn để nhận m\xe3 OTP x\xe1c nhận"}),(0,i.jsxs)("div",{className:"flex flex-col gap-4 mt-6",children:[(0,i.jsx)(l.Z,{name:"email",label:"Email",placeholder:"Nhập email của bạn",className:"w-[404px]"}),(0,i.jsxs)("div",{className:"mt-6 flex flex-col gap-4",children:[(0,i.jsx)(o.Z,{type:"submit",disabled:f,className:"h-12 w-[404px] bg-pink-doca text-white rounded-3xl text-[16px]",children:f?"Đang xử l\xfd...":"Tiếp tục"}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)(h.Z,{href:"/login",className:"text-pink-doca hover:underline",children:"Quay lại đăng nhập"})})]})]})]})}),2===e&&(0,i.jsx)(s.RV,{...j,children:(0,i.jsxs)("form",{onSubmit:P,className:"bg-gray-100 flex flex-col justify-center items-center max-w-[1536px] p-6 rounded-xl shadow-md min-w-[700px]",children:[(0,i.jsx)("h1",{className:"text-2xl font-semibold",children:"X\xe1c nhận OTP"}),(0,i.jsxs)("p",{className:"text-gray-600 mt-2 mb-6 text-center",children:["Ch\xfang t\xf4i đ\xe3 gửi m\xe3 OTP đến email ",n,".",(0,i.jsx)("br",{}),"Vui l\xf2ng kiểm tra v\xe0 nhập m\xe3 OTP v\xe0o \xf4 b\xean dưới."]}),(0,i.jsxs)("div",{className:"flex flex-col gap-4 mt-6",children:[(0,i.jsx)(l.Z,{name:"otp",label:"M\xe3 OTP",placeholder:"Nhập m\xe3 OTP",className:"w-[404px]"}),(0,i.jsx)("div",{className:"text-center mt-2",children:(0,i.jsx)("button",{type:"button",onClick:O,disabled:b,className:"text-pink-doca hover:underline text-sm",children:b?"Đang gửi lại...":"Gửi lại m\xe3 OTP"})}),(0,i.jsxs)("div",{className:"mt-6 flex flex-col gap-4",children:[(0,i.jsx)(o.Z,{type:"submit",disabled:f,className:"h-12 w-[404px] bg-pink-doca text-white rounded-3xl text-[16px]",children:f?"Đang xử l\xfd...":"X\xe1c nhận"}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("button",{type:"button",onClick:()=>t(1),className:"text-pink-doca hover:underline",children:"Quay lại"})})]})]})]})}),3===e&&(0,i.jsx)(s.RV,{...Z,children:(0,i.jsxs)("form",{onSubmit:q,className:"bg-gray-100 flex flex-col justify-center items-center max-w-[1536px] p-6 rounded-xl shadow-md min-w-[700px]",children:[(0,i.jsx)("h1",{className:"text-2xl font-semibold",children:"Đặt lại mật khẩu"}),(0,i.jsx)("p",{className:"text-gray-600 mt-2 mb-6 text-center",children:"Tạo mật khẩu mới cho t\xe0i khoản của bạn"}),(0,i.jsxs)("div",{className:"flex flex-col gap-4 mt-6",children:[(0,i.jsx)(l.Z,{name:"password",label:"Mật khẩu mới",placeholder:"Nhập mật khẩu mới",type:"password",className:"w-[404px]"}),(0,i.jsx)(l.Z,{name:"confirmPassword",label:"X\xe1c nhận mật khẩu",placeholder:"Nhập lại mật khẩu mới",type:"password",className:"w-[404px]"}),(0,i.jsx)("div",{className:"mt-6 flex flex-col gap-4",children:(0,i.jsx)(o.Z,{type:"submit",disabled:f,className:"h-12 w-[404px] bg-pink-doca text-white rounded-3xl text-[16px]",children:f?"Đang xử l\xfd...":"Ho\xe0n tất"})})]})]})})]}),(0,i.jsx)(h.Z,{href:"/",className:"w-[700px] h-[700px] rounded-l-2xl",children:(0,i.jsx)(d.default,{src:"/images/bg-login.png",alt:"bg-login",width:600,height:900,className:"w-[700px] h-[700px] rounded-l-2xl"})})]})}},9555:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(7437),r=n(1201);function s(e){let{className:t,children:n,onClick:s,disabled:a=!1,loading:c=!1,variant:l="primary",type:o="button"}=e;return(0,i.jsx)("button",{onClick:s,disabled:a||c,type:o,className:(0,r.cn)("w-[172px] h-[60px] text-[20px] text-center font-medium rounded-xl transition-all duration-200",{primary:"bg-pink-doca text-white hover:bg-pink-600",secondary:"bg-gray-500 text-white hover:bg-gray-600",outline:"border border-pink-doca text-pink-doca hover:bg-pink-doca hover:text-white"}[l],a&&"opacity-50 cursor-not-allowed",t),children:c?(0,i.jsx)("span",{className:"animate-spin",children:"⏳"}):n})}n(2265)},9701:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(7437),r=n(9501),s=n(1201);function a(e){var t,n;let{name:a,label:c,type:l="text",placeholder:o,className:h,isTextArea:d=!1,autoComplete:u}=e,{register:m,formState:{errors:p}}=(0,r.Gc)();return(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("label",{htmlFor:a,className:"text-base font-semibold",children:c}),d?(0,i.jsx)("textarea",{...m(a),id:a,placeholder:o,className:(0,s.cn)("px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500",h)}):(0,i.jsx)("input",{...m(a),id:a,type:l,placeholder:o,autoComplete:u,className:(0,s.cn)("px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500",h)}),p[a]&&(0,i.jsx)("p",{className:"text-red-500 text-sm",children:null===(n=p[a])||void 0===n?void 0:null===(t=n.message)||void 0===t?void 0:t.toString()})]})}},9680:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(7437),r=n(1201),s=n(7648);function a(e){let{href:t,className:n,children:a}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.default,{href:t,className:(0,r.cn)("",n),children:a})})}},7693:function(e,t,n){"use strict";n.d(t,{Pn:function(){return r},kG:function(){return s},q7:function(){return i}});let i="https://production.doca.love",r={AUTH:{LOGIN:"/api/v1/login",SIGNUP:"/api/v1/signup",FORGET_PASSWORD:"/api/v1/forget-password",OTP:"/api/v1/otp"}},s=e=>(r.AUTH.LOGIN,"".concat(i).concat(e))},1201:function(e,t,n){"use strict";n.d(t,{cn:function(){return s}});var i=n(1994),r=n(3335);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,i.Z)(t))}},5665:function(e,t,n){"use strict";n.d(t,{Iy:function(){return h},Qx:function(){return l},dm:function(){return s},gM:function(){return c},gT:function(){return d},if:function(){return a},kn:function(){return r},ot:function(){return o}});var i=n(4422);let r=i.Ry().shape({firstName:i.Z_().matches(/^[A-Za-zÀ-ỹ\s]+$/,"Họ chỉ được chứa chữ v\xe0 dấu").required("Họ kh\xf4ng được để trống"),lastName:i.Z_().matches(/^[A-Za-zÀ-ỹ\s]+$/,"T\xean chỉ được chứa chữ v\xe0 dấu").required("T\xean kh\xf4ng được để trống"),email:i.Z_().email("Invalid email").required("Email kh\xf4ng được để trống"),password:i.Z_().min(6,"Mật khẩu \xedt nhất 6 k\xfd tự").matches(/[!@#$%^&*(),.?":{}|<>]/,"Mật khẩu cần c\xf3 \xedt nhất 1 k\xfd tự đặc biệt").required("Mật khẩu kh\xf4ng được để trống"),confirmPassword:i.Z_().oneOf([i.iH("password")],"Mật khẩu x\xe1c nhận kh\xf4ng khớp").required("X\xe1c nhận mật khẩu kh\xf4ng được để trống"),phone:i.Z_().matches(/^[0-9]{10}$/,"Số điện thoại phải c\xf3 10 chữ số").required("Số điện thoại kh\xf4ng được để trống"),otp:i.Z_().required("OTP kh\xf4ng được để trống"),message:i.Z_().optional()}),s=i.Ry().shape({email:i.Z_().required("Email hoặc số điện thoại kh\xf4ng được để trống"),password:i.Z_().required("Mật khẩu kh\xf4ng được để trống")});r.pick(["firstName","lastName"]);let a=r.pick(["firstName","lastName","email","password","confirmPassword","phone","otp"]),c=i.Ry().shape({email:i.Z_().email("Email kh\xf4ng hợp lệ").required("Email kh\xf4ng được để trống")}),l=i.Ry().shape({otp:i.Z_().required("OTP kh\xf4ng được để trống")}),o=i.Ry().shape({password:i.Z_().min(6,"Mật khẩu \xedt nhất 6 k\xfd tự").matches(/[!@#$%^&*(),.?":{}|<>]/,"Mật khẩu cần c\xf3 \xedt nhất 1 k\xfd tự đặc biệt").required("Mật khẩu kh\xf4ng được để trống"),confirmPassword:i.Z_().oneOf([i.iH("password")],"Mật khẩu x\xe1c nhận kh\xf4ng khớp").required("X\xe1c nhận mật khẩu kh\xf4ng được để trống")}),h=i.Ry().shape({name:i.Z_().required("T\xean sản phẩm kh\xf4ng được để trống"),price:i.Rx().positive("Gi\xe1 phải l\xe0 số dương").required("Gi\xe1 kh\xf4ng được để trống"),description:i.Z_().required("M\xf4 tả kh\xf4ng được để trống"),categoryIds:i.IX().min(1,"Phải chọn \xedt nhất 1 danh mục"),mainImage:i.nK().test("fileSize","File qu\xe1 lớn",e=>!e||e.size<=5e6),quantity:i.Rx().required("Số lượng kh\xf4ng được để trống"),size:i.Z_().required("K\xedch thước kh\xf4ng được để trống")}),d=i.Ry().shape({title:i.Z_().required("Ti\xeau đề kh\xf4ng được để trống"),content:i.Z_().required("Nội dung kh\xf4ng được để trống"),status:i.Z_().oneOf(["DRAFT","PUBLISHED","URGENT","NEED_PRODUCT","NEED_DONATION"],"Trạng th\xe1i kh\xf4ng hợp lệ"),categoryIds:i.IX().min(1,"Phải chọn \xedt nhất 1 danh mục"),description:i.Z_().required("M\xf4 tả kh\xf4ng được để trống")});i.Ry().shape({productId:i.Z_().required(),quantity:i.Rx().min(1,"Số lượng tối thiểu l\xe0 1").required("Số lượng kh\xf4ng được để trống")})}},function(e){e.O(0,[648,878,137,915,464,99,971,117,744],function(){return e(e.s=5754)}),_N_E=e.O()}]);